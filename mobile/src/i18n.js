import AsyncStorage from '@react-native-async-storage/async-storage';
import {DeviceEventEmitter} from 'react-native';

const LANG_KEY = 'smartwishlist_lang';

const translations = {
  en: {
    appTitle: 'Wishlist',
    login: 'Sign in',
    register: 'Create account',
    emailOrUsername: 'Email or username',
    password: 'Password',
    username: 'Username',
    displayName: 'Display name',
    backToLogin: 'Back to login',
    createWishlist: 'Create wishlist',
    minContribution: 'Min contribution',
    title: 'Title',
    yourLists: 'Your lists',
    sharedWithYou: 'Shared with you',
    noWishlists: 'No wishlists yet.',
    noShared: 'No shared lists.',
    addItem: 'Add item',
    price: 'Price',
    productUrl: 'Product URL',
    imageUrl: 'Image URL',
    autofill: 'Autofill',
    autofillRunning: 'Fetching product data...',
    contribution: 'Contribution',
    reserve: 'Reserve',
    unreserve: 'Unreserve',
    beResponsible: 'Be responsible',
    removeResponsibility: 'Remove responsibility',
    remove: 'Remove',
    priority: 'Priority',
    back: 'Back',
    notifications: 'Notifications',
    notificationSettings: 'Notification settings',
    notificationsBlock: 'Notifications',
    notificationsInApp: 'In-app notifications',
    notificationsPush: 'Push notifications',
    notificationsWishlistShared: 'Wishlist shared',
    notificationsReservation: 'Reservations',
    notificationsFunded: 'Fully funded',
    notificationsFriendRequests: 'Friend requests',
    notificationsOn: 'On',
    notificationsOff: 'Off',
    markAllRead: 'Mark all read',
    noNotifications: 'No new notifications.',
    friends: 'Friends',
    addFriend: 'Add friend',
    sendRequest: 'Send request',
    incoming: 'Incoming requests',
    outgoing: 'Outgoing requests',
    noIncoming: 'No incoming requests.',
    noOutgoing: 'No outgoing requests.',
    noFriends: 'No friends yet.',
    accept: 'Accept',
    reject: 'Reject',
    settings: 'Settings',
    language: 'Language',
    currency: 'Currency',
    logout: 'Logout',
    recipientSelf: 'For myself',
    recipientFriend: 'For a friend',
    recipientInput: 'Friend username or name',
    next: 'Next',
    prev: 'Back',
    privacyTitle: 'Hide from',
    hideFromFound: 'Hide from recipient',
    hideFromUsers: 'Additionally hide from users',
    loading: 'Please wait...',
    tabHome: 'Home',
    tabFriends: 'Friends',
    tabNotifications: 'Notifications',
    tabSettings: 'Settings',
    mineTab: 'My lists',
    sharedTab: 'Shared with me',
    invested: 'Invested',
    youAreResponsible: 'You are responsible',
    openCreateWishlist: 'Create wishlist',
    openAddItem: 'Add item',
    settingsLanguageValue: 'Current language',
    settingsCurrencyValue: 'Current currency',
    settingsThemeValue: 'Current theme',
    settingsTheme: 'Theme',
    themeDark: 'Dark',
    themeLight: 'Light',
    openSection: 'Open',
  },
  ru: {
    appTitle: 'Wishlist',
    login: 'Войти',
    register: 'Создать аккаунт',
    emailOrUsername: 'Email или username',
    password: 'Пароль',
    username: 'Username',
    displayName: 'Ваше имя',
    backToLogin: 'Назад к входу',
    createWishlist: 'Создать список',
    minContribution: 'Минимальный вклад',
    title: 'Название',
    yourLists: 'Мои списки',
    sharedWithYou: 'С вами поделились',
    noWishlists: 'Пока нет списков.',
    noShared: 'Нет доступных списков.',
    addItem: 'Добавить товар',
    price: 'Цена',
    productUrl: 'Ссылка на товар',
    imageUrl: 'URL картинки',
    autofill: 'Автозаполнение',
    autofillRunning: 'Пробую подтянуть данные...',
    contribution: 'Вклад',
    reserve: 'Забронировать',
    unreserve: 'Снять бронь',
    beResponsible: 'Стать ответственным',
    removeResponsibility: 'Снять ответственность',
    remove: 'Удалить',
    priority: 'Приоритет',
    back: 'Назад',
    notifications: 'Уведомления',
    notificationSettings: 'Настройки уведомлений',
    notificationsBlock: 'Уведомления',
    notificationsInApp: 'В приложении',
    notificationsPush: 'Push-уведомления',
    notificationsWishlistShared: 'Поделились списком',
    notificationsReservation: 'Брони и резервы',
    notificationsFunded: 'Полностью собранные',
    notificationsFriendRequests: 'Заявки в друзья',
    notificationsOn: 'Вкл',
    notificationsOff: 'Выкл',
    markAllRead: 'Прочитать все',
    noNotifications: 'Нет новых уведомлений.',
    friends: 'Друзья',
    addFriend: 'Добавить друга',
    sendRequest: 'Отправить',
    incoming: 'Входящие запросы',
    outgoing: 'Исходящие запросы',
    noIncoming: 'Нет входящих запросов.',
    noOutgoing: 'Нет исходящих запросов.',
    noFriends: 'Пока нет друзей.',
    accept: 'Принять',
    reject: 'Отклонить',
    settings: 'Настройки',
    language: 'Язык',
    currency: 'Валюта',
    logout: 'Выйти',
    recipientSelf: 'Для себя',
    recipientFriend: 'Для друга',
    recipientInput: 'Username или имя',
    next: 'Далее',
    prev: 'Назад',
    privacyTitle: 'Кого скрыть',
    hideFromFound: 'Скрыть подарок от получателя',
    hideFromUsers: 'Дополнительно скрыть от пользователей',
    loading: 'Подождите...',
    tabHome: 'Главная',
    tabFriends: 'Друзья',
    tabNotifications: 'Уведомления',
    tabSettings: 'Настройки',
    mineTab: 'Мои списки',
    sharedTab: 'Поделились со мной',
    invested: 'Вложено',
    youAreResponsible: 'Ты ответственный',
    openCreateWishlist: 'Создать вишлист',
    openAddItem: 'Добавить товар',
    settingsLanguageValue: 'Текущий язык',
    settingsCurrencyValue: 'Текущая валюта',
    settingsThemeValue: 'Текущая тема',
    settingsTheme: 'Тема',
    themeDark: 'Темная',
    themeLight: 'Светлая',
    openSection: 'Открыть',
  },
};

export async function getLanguage() {
  return (await AsyncStorage.getItem(LANG_KEY)) || 'ru';
}

export async function setLanguage(lang) {
  await AsyncStorage.setItem(LANG_KEY, lang);
  DeviceEventEmitter.emit('languageChanged', lang);
}

export function t(lang, key) {
  return translations[lang]?.[key] || translations.en[key] || key;
}
